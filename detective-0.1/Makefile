MAKE_DIR = $(PWD)

APP = app
GPIOLIB = gpiolib

APP_DIR := $(MAKE_DIR)/$(APP)
GPIOLIB_DIR := $(MAKE_DIR)/$(GPIOLIB)

INC_SRCH_PATH :=
INC_SRCH_PATH += -I$(GPIOLIB_DIR)

LIB_SRCH_PATH :=
LIB_SRCH_PATH += -L$(MAKE_DIR)/libs

CFLAGS :=
CFLAGS += $(INC_SRCH_PATH) $(LIB_SRCH_PATH)
CFLAGS += -DDEBUG -D_REENTRANT
CFLAGS += -Wall 

LDFLAGS := -lpthread -lm
LDFLAGS += -lgpio

export MAKE_DIR CFLAGS LDFLAGS LIBS INC_SRCH_PATH LIG_SRCH_PATH

all: 
	echo $(CFLAGS)
	$(MAKE) -C $(GPIOLIB_DIR) -f $(GPIOLIB).mk
	$(MAKE) -C $(APP_DIR) -f $(APP).mk
	
.PHONY: clean
clean:
	$(MAKE) -C $(GPIOLIB_DIR) -f $(GPIOLIB).mk clean
	$(MAKE) -C $(APP_DIR) -f $(APP).mk clean
	
